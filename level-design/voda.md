# Вода

Существует два способа добавить воду на уровень: включение глобальной воды и создание локальных водных областей.&#x20;

## **Глобальная вода**

Глобальная вода распространяется на весь уровень и заполняет водой все, что находятся ниже высоты 0. Чтобы включить глобальную воду, необходимо перейти в [свойства мира](world.md), установите значение параметра [environmentParameters -> disableWaterShader](world.md) как false.

<figure><img src="../.gitbook/assets/Знімок екрана 2024-06-16 011225.png" alt=""><figcaption></figcaption></figure>

По умолчанию этот параметр установлен как true, что означает отключение рендеринга воды на уровне. &#x20;

{% hint style="info" %}
Важно помнить, что если значение этого параметра установить как true, это отключит весь рендеринг воды на уровне, включая те [локальные водные области](voda.md#lokalnaya-voda), которые были созданы вручную.
{% endhint %}

## Локальная вода

Локальная вода используется для создания озер, рек, луж и болот на других уровнях высоты, отличных от глобальной воды. Этот способ позволяет точно контролировать расположение и форму водных объектов.

По сути область локальной воды поднимает уровень глобальной воды к нужной высоте в определенной области, заполняя водой все пространство от локальной зоны воды до нижней границы мира.&#x20;

<figure><img src="../.gitbook/assets/image (8).png" alt=""><figcaption></figcaption></figure>

Это означает, что вода не может существовать в одних координатах на разных уровнях. Например, если у вас есть озеро наверху, а под ним пещера, в которой тоже должно быть озеро, это невозможно.&#x20;

### Создание локальной воды

Для создания локальной воды сначала выберите слой, на котором будет размещаться объект водной области, сделав двойной клик по нужному слою. Затем перейдите в окно просмотра уровня и нажмите правой кнопкой мыши. В появившемся меню выберите Graphics -> Add Local Water Area.

<figure><img src="../.gitbook/assets/image (11).png" alt=""><figcaption></figcaption></figure>

После этого на уровне появится объект воды, который можно перемещать и изменять по своему усмотрению.&#x20;

{% embed url="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2FKTpR2baZt07exAVMzmhU%2Fuploads%2FrFJYLEXgdC6cerT1knif%2F2024-06-16%2013-53-05.mp4?alt=media&token=e1b43f45-658b-434c-99cc-b36c2fd9782f" %}

{% hint style="info" %}
Чтобы включить отображение визуальных границ области локальной воды, включите [отображение ](../editor/debug.md)[областей](../editor/debug.md) в режиме отладки.
{% endhint %}

#### Опустошение глобальной воды

Локальная вода также позволяет осушать определенные участки глобальной воды. Например, если пещера уходит ниже уровня глобальной воды (уровня 0), локальная вода может быть использована для осушения той зоны глобальной воды, где будет располагаться пещера или другой объект уходящий ниже уровня нуля.

{% embed url="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2FKTpR2baZt07exAVMzmhU%2Fuploads%2FEUnr1t5tlYopEkIhiqV1%2Flocal_test%20-%20The%20Witcher%203%20REDkit%20-%20Build%20%20(D3D11on12)%204.0.103444%20%20(May%2028%202024)%202024-06-16%2015-46-08.mp4?alt=media&token=9581402c-287d-43a7-acff-a5f914c3c5bd" %}

## Лужи

Лужи представляют собой [Entity Template](broken-reference), которые используются для создания визуального эффекта воды на поверхности. Эти лужи не влияют на геймплей и предназначены только для визуализации воды под ногами игрока.

Entity Template лужи состоит из двух компонентов: плоского меша лужи ([CMeshComponent](broken-reference)) и области физического материала ([CStandPhysicalMaterialAreaComponent](broken-reference)) с эффектом [water\_shallow](broken-reference), который определяет эффект и звук что должен воспроизводиться если игрок находится в этой области, в данном случае звук воды и эффект брызг под ногами.

### **Создание лужи**

Для создания лужи сначала выберите слой, на который хотите разместить лужу, далее перетащите шаблон сущности лужи из Asset Browser на выбранный слой.

{% embed url="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2FKTpR2baZt07exAVMzmhU%2Fuploads%2FVfe70AdY9Z4amJ1rLVaz%2Flocal_test%20-%20The%20Witcher%203%20REDkit%20-%20Build%20%20(D3D11on12)%204.0.103444%20%20(May%2028%202024)%202024-06-19%2000-47-43.mp4?alt=media&token=010a2485-15f2-49fd-ab54-3a0781a57510" %}

Шаблоны луж хранятся в следующих папках:

* environment\decorations\water\puddles\\
* environment\water\\

### Создание шаблона лужи

Чтобы создать новую лужу с уникальным внешним видом, необходимо:

1. Скопировать меш и шаблон существующий лужи.&#x20;
2. Настроить материал в скопированном меше лужи под вид который вам необходим. Все меши луж используют материал [transperent\_reflective](../materialy/materialy/transperent\_reflective.md). Параметры этого материала можно настроить в соответствии с вашими потребностями.
3. Заменить меш в скопированном шаблоне сущности на тот который вы скопировали и отредактировали.

{% embed url="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2FKTpR2baZt07exAVMzmhU%2Fuploads%2FR0CHTn7Rt9lh8j3liygp%2F2024-06-19%2000-59-59.mp4?alt=media&token=38e70c11-50fc-46a5-bb82-c896babcf53e" %}

## Реки

Реки представляют собой меши, аналогичные мешам луж, но имеющие извилистую форму и другие материалы. Реки, как и лужи, представляют собой чисто визуальные объекты. Они расположены под ногами игрока и являются тонкими мешами, не влияющими на геймплей. В отличие от луж, ручьи не имеют шаблона сущности ([Entity Template](broken-reference)), который позволял бы разместить их вместе с областью физического материала ([CStandPhysicalMaterialAreaComponent](broken-reference)). Область физического материала необходимо рисовать вручную по форме реки с помощью [Vertex Editor](../gameplay/action-point/job-tree.md).

Каждая река уникальна по своей форме, поэтому переиспользовать меши существующих рек вряд ли удастся, так как под них нужно подгонять ландшафт. Для каждой реки необходимо создавать свой меш. &#x20;

fx\environment\rivers\\

### Создание реки



### Создание меша реки

